{
  "hash": "d89e2dec17a3f8e85e82aaf94e8d3be7",
  "result": {
    "markdown": "---\ntitle: \"Hypothesis testing and poker\"\nauthor: \"Daniel Kaplan\"\ndate: \"2023-05-03\"\ncategories: [Hypothesis testing, Null hypothesis, p-value, shuffling]\n---\n\n\n\n\nSuppose I had a statistics class with 19 students. One day I walk in and announce a that we are going to play poker. Any student who has a better hand than I will get a grade of \"A.\" \n\nI pull **two** decks out of my pocket, each deck in its box, which has already been opened.\n\n\"I shuffled these two decks this morning,\" I announce. \"Deal yourself five cards and then pass the remainder of the deck on to your neighbor.\" \n\nI hand one complete deck to a student in the back of the room. Then\nI deal myself five cards from the other deck, and pass the remainder to a student in the front row. The front-row student likes to joke around, which I like. She says, \"Are you sure that you shuffled this deck?\" \n\n\"Maybe not,\" I reply. \"Why don't you make sure by shuffling it again.\" But I hold on to my original five cards.\n\nOnce each of the 19 students has a hand of five cards, I ask them to rank their hands. Poker experience is not a pre-requisite for my stats class so I go over the rules, trying to turn it into a lesson in probability. \n\nA quick web search later, I am on [this site](https://www.cardschat.com/poker/strategy/poker-hands/) and projecting this diagram:\n\n::: {.column-page-right}\n![](poker-hands.png)\n:::\n\nNow the reveal: I got two pair: 5s and aces.\n\nThe students groan. I've beaten them all.\n\nThe student in the front row once again asks, \"Are you sure that you shuffled this deck?\" She remembers that I had already selected my cards before she reshuffled them. \n\n**Questions**:\n\n1. Is her skepticism warranted? Calculate the p-value for my getting two pair under the Null hypothesis that the deck was fairly shuffled before class. \n\n2. If one of the students had happened to beat me, would that change the p-value on my hand?\n\n3. Suppose that my hand had been one pair. What would be the p-value? Should I conclude that the deck had been fairly shuffled before class.\n\n&nbsp;\n\n*This problem was suggested by Lt. Col. Kenneth Horton.*\n\n::: {.callout-note}\n## Digression on probability\n\nThe probabilities in the above table are wrong. There are 2,598,960 distinct poker hands. (This is after sorting the cards within each hand.) There are indeed 4 ways to get a royal flush, putting the probability at 1/649,740.\n\nHere's a deck of cards in R:\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nsuits <- \"♣♠♡♢\"|> strsplit(split=NULL)|> unlist()\nvalues <- c(2:10, \"A\", \"J\", \"Q\", \"K\")\ndeck <- outer(suits, values, FUN=paste0) |> c()\ndeck\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"♣2\"  \"♠2\"  \"♡2\"  \"♢2\"  \"♣3\"  \"♠3\"  \"♡3\"  \"♢3\"  \"♣4\"  \"♠4\"  \"♡4\"  \"♢4\" \n[13] \"♣5\"  \"♠5\"  \"♡5\"  \"♢5\"  \"♣6\"  \"♠6\"  \"♡6\"  \"♢6\"  \"♣7\"  \"♠7\"  \"♡7\"  \"♢7\" \n[25] \"♣8\"  \"♠8\"  \"♡8\"  \"♢8\"  \"♣9\"  \"♠9\"  \"♡9\"  \"♢9\"  \"♣10\" \"♠10\" \"♡10\" \"♢10\"\n[37] \"♣A\"  \"♠A\"  \"♡A\"  \"♢A\"  \"♣J\"  \"♠J\"  \"♡J\"  \"♢J\"  \"♣Q\"  \"♠Q\"  \"♡Q\"  \"♢Q\" \n[49] \"♣K\"  \"♠K\"  \"♡K\"  \"♢K\" \n```\n:::\n:::\n\n\nHow many different five-card hands are there?\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nAll_hands <- combinat::combn(deck, 5) |> \n  apply(2, FUN=function(x) paste0(c(x), collapse=\"|\"))\nlength(All_hands)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 2598960\n```\n:::\n:::\n\n\nHere's a possible set of 10 hands dealt from a thoroughly shuffled deck:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nsample(All_hands, size=10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"♡3|♢3|♣5|♡6|♢10\"  \"♠5|♡5|♣6|♠7|♠A\"   \"♢2|♡6|♡10|♢10|♡A\" \"♡4|♢4|♢5|♢J|♣Q\"  \n [5] \"♣4|♣6|♠8|♢8|♡K\"   \"♢3|♠4|♡8|♠J|♣K\"   \"♠2|♠6|♡6|♢8|♡K\"   \"♣3|♢8|♣10|♢10|♠A\"\n [9] \"♠2|♢3|♠A|♢A|♣J\"   \"♣3|♣6|♡6|♠8|♠J\"  \n```\n:::\n:::\n\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}